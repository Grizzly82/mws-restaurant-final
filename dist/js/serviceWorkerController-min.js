navigator.serviceWorker&&navigator.serviceWorker.register("/sw.js",{scope:"/"}).then(function(i){console.log("ServiceWorker registration successful with scope: ",i.scope),navigator.serviceWorker.controller&&(console.log("navigator.serviceWorker.controller"),Notification&&"default"===Notification.permission&&Notification.requestPermission(function(i){"permission"in Notification||(Notification.permission=i)}),i.waiting?updateReady(i.waiting):i.installing?trackInstalling(i.installing):i.addEventListener("updatefound",function(){trackInstalling(i.installing)}))}).catch(function(i){console.log("ServiceWorker registration failed: ",i)}),trackInstalling=function(i){console.log("A new ServiceWorker is installing"),i.addEventListener("statechange",function(){"installed"==i.state&&updateReady(i)})},updateReady=function(i){if(console.log("A new ServiceWorker is waiting"),"granted"===Notification.permission){var e=new Notification("New ServiceWorker is Ready",{body:"Click close to update",tag:"updateSW"});setTimeout(e.close.bind(e),1e4),e.onclick=function(e){i.postMessage({action:"skipWaiting"}),window.console.log("Send skipWaiting message from onclick")},e.onerror=function(i){window.console.log("Notification error: ",i)}}};